---
import BaseLayout from "../layouts/BaseLayout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import Container from "../components/Container.astro";
import Badge from "../components/Badge.astro";
import Button from "../components/Button.astro";
import SectionHeading from "../components/SectionHeading.astro";
import ProjectCard from "../components/ProjectCard.astro";
import Icon from "../components/Icon.astro";
import { site } from "../config/site";
import { getCollection } from "astro:content";
import PlanBadges from "../components/PlanBadges.astro";
import ServicesRows from "../components/ServicesRows.astro";

const caseStudies = (await getCollection("case-studies"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<BaseLayout title="Home" description={site.description}>
  <Navbar />

  <main>
    <!-- HERO -->
    <section class="pt-14 sm:pt-20">
      <Container>
        <div class="grid items-center gap-10 lg:grid-cols-2">
          <div>
            <Badge text="Safaryar Technologies" />
            <h1 class="mt-5 font-display text-4xl font-semibold leading-tight sm:text-5xl">
              Build modern web, MIS & mobile products —
              <span class="text-cyanBrand-500">fast, clean, and scalable.</span>
            </h1>
            <p class="mt-5 max-w-xl text-base text-white/75 sm:text-lg">
              We handle the full delivery cycle: UI/UX design, full-stack development, deployment, and maintenance —
              so you can focus on your business.
            </p>

            <div class="mt-7 flex flex-col gap-3 sm:flex-row sm:items-center">
              <Button href={site.cta.primary.href}>
                <span>{site.cta.primary.label}</span>
                <span class="text-ink-950/80">→</span>
              </Button>
              <Button href={site.cta.secondary.href} variant="secondary">
                {site.cta.secondary.label}
              </Button>
            </div>

            <div class="mt-8 grid max-w-xl grid-cols-1 gap-3 sm:grid-cols-3">
              <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                <div class="text-sm font-semibold text-white">End-to-end delivery</div>
                <div class="mt-1 text-xs text-white/65">Design → Build → Launch</div>
              </div>
              <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                <div class="text-sm font-semibold text-white">Modern stack</div>
                <div class="mt-1 text-xs text-white/65">Performance + SEO</div>
              </div>
              <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                <div class="text-sm font-semibold text-white">Maintenance ready</div>
                <div class="mt-1 text-xs text-white/65">Support & upgrades</div>
              </div>
            </div>
          </div>

          <!-- Right side feature panel -->
          <div class="relative">
            <div
              class="absolute -inset-2 rounded-3xl blur-2xl"
              style="background: radial-gradient(circle, rgba(2,235,234,0.18), transparent 55%);"
            ></div>

            <div class="relative rounded-3xl border border-white/10 bg-white/5 p-6 shadow-glow">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="rounded-xl border border-white/10 bg-ink-950/40 p-3 text-cyanBrand-500">
                    <Icon name="bolt" />
                  </div>
                  <div>
                    <div class="font-display text-base font-semibold">What you get</div>
                    <div class="text-xs text-white/60">A reliable delivery partner</div>
                  </div>
                </div>
                <span class="text-xs text-white/55">Safaryar</span>
              </div>

              <div class="mt-6 grid gap-3">
                <div class="rounded-2xl border border-white/10 bg-ink-950/30 p-4">
                  <div class="flex items-start gap-3">
                    <div class="mt-1 text-cyanBrand-500"><Icon name="spark" /></div>
                    <div>
                      <div class="text-sm font-semibold">Modern UI that feels premium</div>
                      <div class="mt-1 text-xs text-white/65">
                        Design systems, crisp typography, conversion-first layouts.
                      </div>
                    </div>
                  </div>
                </div>

                <div class="rounded-2xl border border-white/10 bg-ink-950/30 p-4">
                  <div class="flex items-start gap-3">
                    <div class="mt-1 text-cyanBrand-500"><Icon name="shield" /></div>
                    <div>
                      <div class="text-sm font-semibold">Stability and maintainability</div>
                      <div class="mt-1 text-xs text-white/65">
                        Clean code, structured delivery, support plans available.
                      </div>
                    </div>
                  </div>
                </div>

                <div class="rounded-2xl border border-white/10 bg-ink-950/30 p-4">
                  <div class="flex items-start gap-3">
                    <div class="mt-1 text-cyanBrand-500"><Icon name="cloud" /></div>
                    <div>
                      <div class="text-sm font-semibold">Deployments done right</div>
                      <div class="mt-1 text-xs text-white/65">
                        CI/CD, monitoring, backups, hosting guidance.
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mt-6 flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 p-4">
                <div>
                  <div class="text-sm font-semibold">Let’s talk scope</div>
                  <div class="text-xs text-white/65">We reply within 24 hours</div>
                </div>
                <Button href="/contact" variant="secondary">Contact →</Button>
              </div>
            </div>
          </div>
        </div>
      </Container>
    </section>

    <!-- SERVICES -->
    <ServicesRows />

    <!-- PLANS -->
    <PlanBadges />

    <!-- PROCESS -->
    <section class="mt-20">
      <Container>
        <SectionHeading
          eyebrow="Process"
          title="A clear, predictable workflow"
          subtitle="We deliver in milestones with transparent communication — so you always know what’s happening."
        />

        <div class="mt-10 grid gap-4 sm:grid-cols-2 lg:grid-cols-5">
          {site.process.map((p, idx) => (
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <div class="text-xs font-semibold uppercase tracking-[0.22em] text-cyanBrand-500/90">
                Step {idx + 1}
              </div>
              <div class="mt-2 font-display text-base font-semibold">{p.title}</div>
              <div class="mt-2 text-sm text-white/70">{p.text}</div>
            </div>
          ))}
        </div>
      </Container>
    </section>

    <!-- WORK -->
    <section class="mt-20">
      <Container>
        <SectionHeading
          eyebrow="Work"
          title="Featured case studies"
          subtitle="Showcasing how we approach real-world product builds."
        />

        <div class="mt-10 grid gap-4 lg:grid-cols-3">
          {caseStudies.map((p) => (
            <ProjectCard
              title={p.data.title}
              description={p.data.description}
              href={`/case-studies/${p.slug}`}
              tags={p.data.tags}
            />
          ))}
        </div>

        <div class="mt-8">
          <Button href="/work" variant="secondary">Explore work →</Button>
        </div>
      </Container>
    </section>

    <!-- CTA -->
    <section class="mt-20">
      <Container>
        <div class="relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-8 shadow-glow sm:p-10">
          <div
            class="absolute -right-20 -top-20 h-72 w-72 rounded-full blur-3xl"
            style="background: radial-gradient(circle, rgba(2,235,234,0.20), transparent 60%);"
          ></div>

          <div class="relative flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
            <div class="max-w-2xl">
              <div class="font-display text-2xl font-semibold sm:text-3xl">
                Ready to build with Safaryar?
              </div>
              <p class="mt-3 text-white/75">
                Tell us what you’re building — we’ll suggest the best approach, timeline, and next steps.
              </p>
            </div>
            <div class="flex gap-3">
              <Button href="/contact">Start a Project →</Button>
              <Button href="/services" variant="secondary">See Services</Button>
            </div>
          </div>
        </div>
      </Container>
    </section>
  </main>

  <Footer />
</BaseLayout>
